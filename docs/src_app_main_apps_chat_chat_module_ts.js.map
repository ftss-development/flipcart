{"version":3,"file":"src_app_main_apps_chat_chat_module_ts.js","mappings":"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","sources":["./src/app/main/apps/chat/chat-content/chat-content.component.ts","./src/app/main/apps/chat/chat-content/chat-content.component.html","./src/app/main/apps/chat/chat-sidebars/chat-active-sidebar/chat-active-sidebar.component.ts","./src/app/main/apps/chat/chat-sidebars/chat-active-sidebar/chat-active-sidebar.component.html","./src/app/main/apps/chat/chat-sidebars/chat-sidebar/chat-sidebar.component.ts","./src/app/main/apps/chat/chat-sidebars/chat-sidebar/chat-sidebar.component.html","./src/app/main/apps/chat/chat-sidebars/chat-user-sidebar/chat-user-sidebar.component.ts","./src/app/main/apps/chat/chat-sidebars/chat-user-sidebar/chat-user-sidebar.component.html","./src/app/main/apps/chat/chat.component.ts","./src/app/main/apps/chat/chat.component.html","./src/app/main/apps/chat/chat.module.ts","./src/app/main/apps/chat/chat.service.ts"],"sourcesContent":["import { Component, ElementRef, OnInit, ViewChild } from '@angular/core';\r\n\r\nimport { CoreSidebarService } from '@core/components/core-sidebar/core-sidebar.service';\r\n\r\nimport { ChatService } from 'app/main/apps/chat/chat.service';\r\n\r\n@Component({\r\n  selector: 'app-chat-content',\r\n  templateUrl: './chat-content.component.html'\r\n})\r\nexport class ChatContentComponent implements OnInit {\r\n  // Decorator\r\n  @ViewChild('scrollMe') scrollMe: ElementRef;\r\n  scrolltop: number = null;\r\n\r\n  // Public\r\n  public activeChat: Boolean;\r\n  public chats;\r\n  public chatUser;\r\n  public userProfile;\r\n  public chatMessage = '';\r\n  public newChat;\r\n\r\n  /**\r\n   * Constructor\r\n   *\r\n   * @param {ChatService} _chatService\r\n   * @param {CoreSidebarService} _coreSidebarService\r\n   */\r\n  constructor(private _chatService: ChatService, private _coreSidebarService: CoreSidebarService) {}\r\n\r\n  // Public Methods\r\n  // -----------------------------------------------------------------------------------------------------\r\n\r\n  /**\r\n   * Update Chat\r\n   */\r\n  updateChat() {\r\n    this.newChat = {\r\n      message: this.chatMessage,\r\n      time: 'Mon Dec 10 2018 07:46:43 GMT+0000 (GMT)',\r\n      senderId: this.userProfile.id\r\n    };\r\n\r\n    // If chat data is available (update chat)\r\n    if (this.chats.chat) {\r\n      if (this.newChat.message !== '') {\r\n        this.chats.chat.push(this.newChat);\r\n        this._chatService.updateChat(this.chats);\r\n        this.chatMessage = '';\r\n        setTimeout(() => {\r\n          this.scrolltop = this.scrollMe?.nativeElement.scrollHeight;\r\n        }, 0);\r\n      }\r\n    }\r\n    // Else create new chat\r\n    else {\r\n      this._chatService.createNewChat(this.chatUser.id, this.newChat);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Toggle Sidebar\r\n   *\r\n   * @param name\r\n   */\r\n  toggleSidebar(name) {\r\n    this._coreSidebarService.getSidebarRegistry(name).toggleOpen();\r\n  }\r\n\r\n  // Lifecycle Hooks\r\n  // -----------------------------------------------------------------------------------------------------\r\n\r\n  /**\r\n   * On init\r\n   */\r\n  ngOnInit(): void {\r\n    // Subscribe to Chat Change\r\n    this._chatService.onChatOpenChange.subscribe(res => {\r\n      this.chatMessage = '';\r\n      this.activeChat = res;\r\n      setTimeout(() => {\r\n        this.scrolltop = this.scrollMe?.nativeElement.scrollHeight;\r\n      }, 0);\r\n    });\r\n\r\n    // Subscribe to Selected Chat Change\r\n    this._chatService.onSelectedChatChange.subscribe(res => {\r\n      this.chats = res;\r\n    });\r\n\r\n    // Subscribe to Selected Chat User Change\r\n    this._chatService.onSelectedChatUserChange.subscribe(res => {\r\n      this.chatUser = res;\r\n    });\r\n\r\n    this.userProfile = this._chatService.userProfile;\r\n  }\r\n}\r\n","<div class=\"body-content-overlay\"></div>\r\n<!-- Main chat area -->\r\n<section class=\"chat-app-window\">\r\n  <!-- To load Conversation -->\r\n  <div class=\"start-chat-area\" [ngClass]=\"{ 'd-none': activeChat === true }\">\r\n    <div class=\"mb-1 start-chat-icon\">\r\n      <i data-feather=\"message-square\"></i>\r\n    </div>\r\n    <h4 class=\"sidebar-toggle start-chat-text\" (click)=\"toggleSidebar('chat-sidebar')\">Start Conversation</h4>\r\n  </div>\r\n  <!--/ To load Conversation -->\r\n\r\n  <!-- Active Chat -->\r\n  <div class=\"active-chat\" [ngClass]=\"{ 'd-none': activeChat !== true }\" *ngIf=\"activeChat === true\">\r\n    <!-- Chat Header -->\r\n    <div class=\"chat-navbar\">\r\n      <header class=\"chat-header\">\r\n        <div class=\"d-flex align-items-center\">\r\n          <button class=\"btn sidebar-toggle d-block d-lg-none mr-1 p-0\" (click)=\"toggleSidebar('chat-sidebar')\">\r\n            <i data-feather=\"menu\" class=\"font-medium-5\"></i>\r\n          </button>\r\n          <button\r\n            class=\"btn avatar avatar-border user-profile-toggle bg-transparent m-0 mr-1 p-0\"\r\n            (click)=\"toggleSidebar('chat-active-sidebar')\"\r\n          >\r\n            <img [src]=\"chatUser.avatar\" alt=\"avatar\" height=\"36\" width=\"36\" />\r\n            <span\r\n              [ngClass]=\"{\r\n                'avatar-status-offline': chatUser.status == 'offline',\r\n                'avatar-status-online': chatUser.status == 'online',\r\n                'avatar-status-busy': chatUser.status == 'busy',\r\n                'avatar-status-away': chatUser.status == 'away'\r\n              }\"\r\n            ></span>\r\n          </button>\r\n          <h6 class=\"mb-0\">{{ chatUser.fullName }}</h6>\r\n        </div>\r\n        <div class=\"d-flex align-items-center\">\r\n          <i data-feather=\"phone-call\" class=\"cursor-pointer d-sm-block d-none font-medium-2 mr-1\"></i>\r\n          <i data-feather=\"video\" class=\"cursor-pointer d-sm-block d-none font-medium-2 mr-1\"></i>\r\n          <i data-feather=\"search\" class=\"cursor-pointer d-sm-block d-none font-medium-2\"></i>\r\n          <div ngbDropdown>\r\n            <button\r\n              class=\"btn-icon btn btn-transparent hide-arrow btn-sm\"\r\n              type=\"button\"\r\n              aria-haspopup=\"true\"\r\n              aria-expanded=\"false\"\r\n              ngbDropdownToggle\r\n            >\r\n              <i data-feather=\"more-vertical\" id=\"chat-header-actions\" class=\"font-medium-2\"></i>\r\n            </button>\r\n            <div ngbDropdownMenu class=\"dropdown-menu-right\" aria-labelledby=\"chat-header-actions\">\r\n              <a ngbDropdownItem href=\"javascript:void(0);\">View Contact</a>\r\n              <a ngbDropdownItem href=\"javascript:void(0);\">Mute Notifications</a>\r\n              <a ngbDropdownItem href=\"javascript:void(0);\">Block Contact</a>\r\n              <a ngbDropdownItem href=\"javascript:void(0);\">Clear Chat</a>\r\n              <a ngbDropdownItem href=\"javascript:void(0);\">Report</a>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </header>\r\n    </div>\r\n    <!--/ Chat Header -->\r\n\r\n    <!-- User Chat messages -->\r\n    <div class=\"user-chats\" [perfectScrollbar] #scrollMe [scrollTop]=\"scrolltop\">\r\n      <div class=\"chats\">\r\n        <div\r\n          class=\"chat\"\r\n          *ngFor=\"let chatRef of chats.chat\"\r\n          [ngClass]=\"{ 'chat-left': chatRef.senderId === chats.userId }\"\r\n        >\r\n          <div class=\"chat-avatar\">\r\n            <span class=\"avatar box-shadow-1 cursor-pointer\">\r\n              <img\r\n                *ngIf=\"chatRef.senderId === chats.userId; else alternateAvatar\"\r\n                [src]=\"chatUser.avatar\"\r\n                alt=\"avatar\"\r\n                height=\"36\"\r\n                width=\"36\"\r\n              />\r\n              <ng-template #alternateAvatar>\r\n                <img [src]=\"userProfile.avatar\" alt=\"avatar\" height=\"36\" width=\"36\" />\r\n              </ng-template>\r\n            </span>\r\n          </div>\r\n          <div class=\"chat-body\">\r\n            <div class=\"chat-content\">\r\n              <p>{{ chatRef.message }}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!-- User Chat messages -->\r\n\r\n    <!-- Submit Chat form -->\r\n    <form class=\"chat-app-form\" action=\"javascript:void(0);\">\r\n      <div class=\"input-group input-group-merge mr-1 form-send-message\">\r\n        <div class=\"input-group-prepend\">\r\n          <span class=\"speech-to-text input-group-text\"><i data-feather=\"mic\" class=\"cursor-pointer\"></i></span>\r\n        </div>\r\n        <input\r\n          type=\"text\"\r\n          class=\"form-control message\"\r\n          placeholder=\"Type your message or use speech to text\"\r\n          [(ngModel)]=\"chatMessage\"\r\n          name=\"chat-message\"\r\n          (keydown.enter)=\"updateChat()\"\r\n        />\r\n        <div class=\"input-group-append\">\r\n          <span class=\"input-group-text\">\r\n            <label for=\"attach-doc\" class=\"attachment-icon mb-0\">\r\n              <i data-feather=\"image\" class=\"cursor-pointer lighten-2 text-secondary\"></i>\r\n              <input type=\"file\" id=\"attach-doc\" hidden /> </label\r\n          ></span>\r\n        </div>\r\n      </div>\r\n      <button type=\"button\" class=\"btn btn-primary send\" (click)=\"updateChat()\" rippleEffect>\r\n        <i data-feather=\"send\" class=\"d-lg-none\"></i>\r\n        <span class=\"d-none d-lg-block\">Send</span>\r\n      </button>\r\n    </form>\r\n    <!--/ Submit Chat form -->\r\n  </div>\r\n  <!--/ Active Chat -->\r\n</section>\r\n<!--/ Main chat area -->\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\nimport { CoreSidebarService } from '@core/components/core-sidebar/core-sidebar.service';\r\n\r\nimport { ChatService } from 'app/main/apps/chat/chat.service';\r\n\r\n@Component({\r\n  selector: 'app-chat-active-sidebar',\r\n  templateUrl: './chat-active-sidebar.component.html'\r\n})\r\nexport class ChatActiveSidebarComponent implements OnInit {\r\n  // Public\r\n  public chatUser;\r\n\r\n  /**\r\n   * Constructor\r\n   *\r\n   * @param {ChatService} _chatService\r\n   * @param {CoreSidebarService} _coreSidebarService\r\n   */\r\n  constructor(private _chatService: ChatService, private _coreSidebarService: CoreSidebarService) {}\r\n\r\n  // Public Methods\r\n  // -----------------------------------------------------------------------------------------------------\r\n\r\n  /**\r\n   * Toggle Sidebar\r\n   *\r\n   * @param name\r\n   */\r\n  toggleSidebar(name) {\r\n    this._coreSidebarService.getSidebarRegistry(name).toggleOpen();\r\n  }\r\n\r\n  // Lifecycle Hooks\r\n  // -----------------------------------------------------------------------------------------------------\r\n\r\n  /**\r\n   * On init\r\n   */\r\n  ngOnInit(): void {\r\n    this._chatService.onSelectedChatUserChange.subscribe(res => {\r\n      this.chatUser = res;\r\n    });\r\n  }\r\n}\r\n","<!-- User Chat profile right area -->\r\n<div class=\"active-user-profile-sidebar\">\r\n  <header class=\"user-profile-header\">\r\n    <button class=\"btn close-icon p-0\" (click)=\"toggleSidebar('chat-active-sidebar')\">\r\n      <i data-feather=\"x\"></i>\r\n    </button>\r\n    <!-- User Profile image with name -->\r\n    <div class=\"header-profile-sidebar\">\r\n      <div class=\"avatar box-shadow-1 avatar-border avatar-xl\">\r\n        <img [src]=\"chatUser.avatar\" alt=\"user_avatar\" height=\"70\" width=\"70\" />\r\n        <span\r\n          class=\"avatar-status-lg\"\r\n          [ngClass]=\"{\r\n            'avatar-status-offline': chatUser.status == 'offline',\r\n            'avatar-status-online': chatUser.status == 'online',\r\n            'avatar-status-busy': chatUser.status == 'busy',\r\n            'avatar-status-away': chatUser.status == 'away'\r\n          }\"\r\n        ></span>\r\n      </div>\r\n      <h4 class=\"chat-user-name\">{{ chatUser.fullName }}</h4>\r\n      <span class=\"user-post\">{{ chatUser.role }}</span>\r\n    </div>\r\n    <!--/ User Profile image with name -->\r\n  </header>\r\n  <div class=\"user-profile-sidebar-area\" [perfectScrollbar]>\r\n    <!-- About User -->\r\n    <h6 class=\"section-label mb-1\">About</h6>\r\n    <p>{{ chatUser.about }}</p>\r\n    <!-- About User -->\r\n    <!-- User's personal information -->\r\n    <div class=\"personal-info\">\r\n      <h6 class=\"section-label mb-1 mt-3\">Personal Information</h6>\r\n      <ul class=\"list-unstyled\">\r\n        <li class=\"mb-1\">\r\n          <i data-feather=\"mail\" class=\"font-medium-2 mr-50\"></i>\r\n          <span class=\"align-middle\">kristycandy@email.com</span>\r\n        </li>\r\n        <li class=\"mb-1\">\r\n          <i data-feather=\"phone-call\" class=\"font-medium-2 mr-50\"></i>\r\n          <span class=\"align-middle\">+1(123) 456 - 7890</span>\r\n        </li>\r\n        <li>\r\n          <i data-feather=\"clock\" class=\"font-medium-2 mr-50\"></i>\r\n          <span class=\"align-middle\">Mon - Fri 10AM - 8PM</span>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n    <!--/ User's personal information -->\r\n\r\n    <!-- User's Links -->\r\n    <div class=\"more-options\">\r\n      <h6 class=\"section-label mb-1 mt-3\">Options</h6>\r\n      <ul class=\"list-unstyled\">\r\n        <li class=\"cursor-pointer mb-1\">\r\n          <i data-feather=\"tag\" class=\"font-medium-2 mr-50\"></i>\r\n          <span class=\"align-middle\">Add Tag</span>\r\n        </li>\r\n        <li class=\"cursor-pointer mb-1\">\r\n          <i data-feather=\"star\" class=\"font-medium-2 mr-50\"></i>\r\n          <span class=\"align-middle\">Important Contact</span>\r\n        </li>\r\n        <li class=\"cursor-pointer mb-1\">\r\n          <i data-feather=\"image\" class=\"font-medium-2 mr-50\"></i>\r\n          <span class=\"align-middle\">Shared Media</span>\r\n        </li>\r\n        <li class=\"cursor-pointer mb-1\">\r\n          <i data-feather=\"trash\" class=\"font-medium-2 mr-50\"></i>\r\n          <span class=\"align-middle\">Delete Contact</span>\r\n        </li>\r\n        <li class=\"cursor-pointer\">\r\n          <i data-feather=\"slash\" class=\"font-medium-2 mr-50\"></i>\r\n          <span class=\"align-middle\">Block Contact</span>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n    <!--/ User's Links -->\r\n  </div>\r\n</div>\r\n<!--/ User Chat profile right area -->\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { first } from 'rxjs/operators';\r\n\r\nimport { CoreSidebarService } from '@core/components/core-sidebar/core-sidebar.service';\r\n\r\nimport { ChatService } from 'app/main/apps/chat/chat.service';\r\n\r\n@Component({\r\n  selector: 'app-chat-sidebar',\r\n  templateUrl: './chat-sidebar.component.html'\r\n})\r\nexport class ChatSidebarComponent implements OnInit {\r\n  // Public\r\n  public contacts;\r\n  public chatUsers;\r\n  public searchText;\r\n  public chats;\r\n  public selectedIndex = null;\r\n  public userProfile;\r\n\r\n  /**\r\n   * Constructor\r\n   *\r\n   * @param {ChatService} _chatService\r\n   * @param {CoreSidebarService} _coreSidebarService\r\n   */\r\n  constructor(private _chatService: ChatService, private _coreSidebarService: CoreSidebarService) {}\r\n\r\n  // Public Methods\r\n  // -----------------------------------------------------------------------------------------------------\r\n\r\n  /**\r\n   * Open Chat\r\n   *\r\n   * @param id\r\n   * @param newChat\r\n   */\r\n  openChat(id) {\r\n    this._chatService.openChat(id);\r\n\r\n    // Reset unread Message to zero\r\n    this.chatUsers.map(user => {\r\n      if (user.id === id) {\r\n        user.unseenMsgs = 0;\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Toggle Sidebar\r\n   *\r\n   * @param name\r\n   */\r\n  toggleSidebar(name) {\r\n    this._coreSidebarService.getSidebarRegistry(name).toggleOpen();\r\n  }\r\n\r\n  /**\r\n   * Set Index\r\n   *\r\n   * @param index\r\n   */\r\n  setIndex(index: number) {\r\n    this.selectedIndex = index;\r\n  }\r\n\r\n  // Lifecycle Hooks\r\n  // -----------------------------------------------------------------------------------------------------\r\n\r\n  /**\r\n   * On init\r\n   */\r\n  ngOnInit(): void {\r\n    // Subscribe to contacts\r\n    this._chatService.onContactsChange.subscribe(res => {\r\n      this.contacts = res;\r\n    });\r\n\r\n    let skipFirst = 0;\r\n\r\n    // Subscribe to chat users\r\n    this._chatService.onChatUsersChange.subscribe(res => {\r\n      this.chatUsers = res;\r\n\r\n      // Skip setIndex first time when initialized\r\n      if (skipFirst >= 1) {\r\n        this.setIndex(this.chatUsers.length - 1);\r\n      }\r\n      skipFirst++;\r\n    });\r\n\r\n    // Subscribe to selected Chats\r\n    this._chatService.onSelectedChatChange.subscribe(res => {\r\n      this.chats = res;\r\n    });\r\n\r\n    // Add Unseen Message To Chat User\r\n    this._chatService.onChatsChange.pipe(first()).subscribe(chats => {\r\n      chats.map(chat => {\r\n        this.chatUsers.map(user => {\r\n          if (user.id === chat.userId) {\r\n            user.unseenMsgs = chat.unseenMsgs;\r\n          }\r\n        });\r\n      });\r\n    });\r\n\r\n    // Subscribe to User Profile\r\n    this._chatService.onUserProfileChange.subscribe(response => {\r\n      this.userProfile = response;\r\n    });\r\n  }\r\n}\r\n","<!-- Chat Sidebar area -->\r\n<div class=\"chat-sidebar bg-white\">\r\n  <button class=\"btn sidebar-close-icon\" (click)=\"toggleSidebar('chat-sidebar')\">\r\n    <i data-feather=\"x\"></i>\r\n  </button>\r\n  <!-- Sidebar header start -->\r\n  <div class=\"chat-fixed-search\">\r\n    <div class=\"d-flex align-items-center w-100\">\r\n      <div class=\"sidebar-profile-toggle\">\r\n        <button class=\"btn avatar avatar-border bg-transparent p-0\" (click)=\"toggleSidebar('chat-user-sidebar')\">\r\n          <img [src]=\"userProfile.avatar\" alt=\"user_avatar\" height=\"42\" width=\"42\" />\r\n          <span\r\n            [ngClass]=\"{\r\n              'avatar-status-offline': userProfile.status == 'offline',\r\n              'avatar-status-online': userProfile.status == 'online',\r\n              'avatar-status-busy': userProfile.status == 'busy',\r\n              'avatar-status-away': userProfile.status == 'away'\r\n            }\"\r\n          ></span>\r\n        </button>\r\n      </div>\r\n      <div class=\"input-group input-group-merge ml-1 w-100\">\r\n        <div class=\"input-group-prepend\">\r\n          <span class=\"input-group-text round\"><i data-feather=\"search\" class=\"text-muted\"></i></span>\r\n        </div>\r\n        <input\r\n          type=\"text\"\r\n          class=\"form-control round\"\r\n          id=\"chat-search\"\r\n          placeholder=\"Search or start a new chat\"\r\n          aria-label=\"Search...\"\r\n          aria-describedby=\"chat-search\"\r\n          [(ngModel)]=\"searchText\"\r\n        />\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <!-- Sidebar header end -->\r\n\r\n  <!-- Sidebar Users start -->\r\n  <div id=\"users-list\" class=\"chat-user-list-wrapper list-group\" [perfectScrollbar]>\r\n    <h4 class=\"chat-list-title\">Chats</h4>\r\n    <ng-container *ngIf=\"(chatUsers | filter: searchText:'fullName').length; else noResultsChats\"></ng-container>\r\n    <ul class=\"chat-users-list chat-list media-list\">\r\n      <li\r\n        *ngFor=\"let chatUser of chatUsers | filter: searchText:'fullName'; let i = index\"\r\n        [class.active]=\"selectedIndex === i\"\r\n        (click)=\"openChat(chatUser.id); toggleSidebar('chat-sidebar'); setIndex(i)\"\r\n      >\r\n        <span class=\"avatar\"\r\n          ><img [src]=\"chatUser.avatar\" height=\"42\" width=\"42\" alt=\"Generic placeholder image\" />\r\n          <span\r\n            [ngClass]=\"{\r\n              'avatar-status-offline': chatUser.status == 'offline',\r\n              'avatar-status-online': chatUser.status == 'online',\r\n              'avatar-status-busy': chatUser.status == 'busy',\r\n              'avatar-status-away': chatUser.status == 'away'\r\n            }\"\r\n          ></span>\r\n        </span>\r\n        <div class=\"chat-info flex-grow-1\">\r\n          <h5 class=\"mb-0\">{{ chatUser.fullName }}</h5>\r\n          <p class=\"card-text text-truncate\">\r\n            {{ chatUser.about }}\r\n          </p>\r\n        </div>\r\n        <div class=\"chat-meta text-nowrap\">\r\n          <small class=\"float-right mb-25 chat-time\">4:14 PM</small>\r\n          <span *ngIf=\"chatUser.unseenMsgs >= 1\" class=\"float-right badge badge-danger badge-pill\">{{\r\n            chatUser.unseenMsgs\r\n          }}</span>\r\n        </div>\r\n      </li>\r\n\r\n      <ng-template #noResultsChats>\r\n        <li class=\"no-results\" [ngClass]=\"{ show: (chatUsers | filter: searchText:'fullName').length <= 0 }\">\r\n          <h6 class=\"mb-0\">No Chats Found</h6>\r\n        </li>\r\n      </ng-template>\r\n    </ul>\r\n    <h4 class=\"chat-list-title\">Contacts</h4>\r\n    <ng-container *ngIf=\"(contacts | filter: searchText:'fullName').length; else noResultsContacts\"></ng-container>\r\n    <ul class=\"chat-users-list contact-list media-list\">\r\n      <li\r\n        *ngFor=\"let contact of contacts | filter: searchText:'fullName'\"\r\n        (click)=\"openChat(contact.id); toggleSidebar('chat-sidebar')\"\r\n      >\r\n        <span class=\"avatar\"\r\n          ><img [src]=\"contact.avatar\" height=\"42\" width=\"42\" alt=\"Generic placeholder image\" />\r\n        </span>\r\n        <div class=\"chat-info\">\r\n          <h5 class=\"mb-0\">{{ contact.fullName }}</h5>\r\n          <p class=\"card-text text-truncate\">\r\n            {{ contact.about }}\r\n          </p>\r\n        </div>\r\n      </li>\r\n\r\n      <ng-template #noResultsContacts>\r\n        <li class=\"no-results\" [ngClass]=\"{ show: (contacts | filter: searchText:'fullName').length <= 0 }\">\r\n          <h6 class=\"mb-0\">No Contacts Found</h6>\r\n        </li>\r\n      </ng-template>\r\n    </ul>\r\n  </div>\r\n  <!-- Sidebar Users end -->\r\n</div>\r\n<!--/ Chat Sidebar area -->\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\nimport { CoreSidebarService } from '@core/components/core-sidebar/core-sidebar.service';\r\n\r\nimport { ChatService } from 'app/main/apps/chat/chat.service';\r\n\r\n@Component({\r\n  selector: 'app-chat-user-sidebar',\r\n  templateUrl: './chat-user-sidebar.component.html'\r\n})\r\nexport class ChatUserSidebarComponent implements OnInit {\r\n  // Public\r\n  public userProfile;\r\n\r\n  /**\r\n   * Constructor\r\n   *\r\n   * @param {ChatService} _chatService\r\n   * @param {CoreSidebarService} _coreSidebarService\r\n   */\r\n  constructor(private _chatService: ChatService, private _coreSidebarService: CoreSidebarService) {}\r\n\r\n  // Public Methods\r\n  // -----------------------------------------------------------------------------------------------------\r\n\r\n  /**\r\n   * Toggle Sidebar\r\n   *\r\n   * @param name\r\n   */\r\n  toggleSidebar(name) {\r\n    this._coreSidebarService.getSidebarRegistry(name).toggleOpen();\r\n  }\r\n\r\n  /**\r\n   * Update User Status\r\n   */\r\n  updateUserStatus() {\r\n    this._chatService.updateUserProfile(this.userProfile);\r\n  }\r\n\r\n  // Lifecycle Hooks\r\n  // -----------------------------------------------------------------------------------------------------\r\n\r\n  /**\r\n   * On init\r\n   */\r\n  ngOnInit(): void {\r\n    this.userProfile = this._chatService.userProfile;\r\n  }\r\n}\r\n","<!-- Admin user profile area -->\r\n<div class=\"chat-user-sidebar\">\r\n  <header class=\"chat-profile-header\">\r\n    <button class=\"btn close-icon p-0\" (click)=\"toggleSidebar('chat-user-sidebar')\">\r\n      <i data-feather=\"x\"></i>\r\n    </button>\r\n    <!-- User Information -->\r\n    <div class=\"header-profile-sidebar\">\r\n      <div class=\"avatar box-shadow-1 avatar-xl avatar-border\">\r\n        <img [src]=\"userProfile.avatar\" alt=\"user_avatar\" />\r\n        <span\r\n          class=\"avatar-status-xl\"\r\n          [ngClass]=\"{\r\n            'avatar-status-offline': userProfile.status == 'offline',\r\n            'avatar-status-online': userProfile.status == 'online',\r\n            'avatar-status-busy': userProfile.status == 'busy',\r\n            'avatar-status-away': userProfile.status == 'away'\r\n          }\"\r\n        ></span>\r\n      </div>\r\n      <h4 class=\"chat-user-name\">{{ userProfile.fullName }}</h4>\r\n      <span class=\"user-post\">{{ userProfile.role }}</span>\r\n    </div>\r\n    <!--/ User Information -->\r\n  </header>\r\n  <!-- User Details start -->\r\n  <div class=\"profile-sidebar-area\" [perfectScrollbar]>\r\n    <h6 class=\"section-label mb-1\">About</h6>\r\n    <div class=\"about-user\">\r\n      <textarea\r\n        data-length=\"120\"\r\n        class=\"form-control char-textarea\"\r\n        id=\"textarea-counter\"\r\n        rows=\"5\"\r\n        placeholder=\"About User\"\r\n        >{{ userProfile.about }}</textarea\r\n      >\r\n      <small class=\"counter-value float-right\"><span class=\"char-count\">108</span> / 120 </small>\r\n    </div>\r\n    <!-- To set user status -->\r\n    <h6 class=\"section-label mb-1 mt-3\">Status</h6>\r\n    <ul class=\"list-unstyled user-status\">\r\n      <li class=\"pb-1\">\r\n        <div class=\"custom-control custom-control-success custom-radio\">\r\n          <input\r\n            type=\"radio\"\r\n            id=\"activeStatusRadio\"\r\n            name=\"userStatus\"\r\n            class=\"custom-control-input\"\r\n            [(ngModel)]=\"userProfile.status\"\r\n            (change)=\"updateUserStatus()\"\r\n            value=\"online\"\r\n            checked\r\n          />\r\n          <label class=\"custom-control-label ml-25\" for=\"activeStatusRadio\">Active</label>\r\n        </div>\r\n      </li>\r\n      <li class=\"pb-1\">\r\n        <div class=\"custom-control custom-control-danger custom-radio\">\r\n          <input\r\n            type=\"radio\"\r\n            id=\"dndStatusRadio\"\r\n            [(ngModel)]=\"userProfile.status\"\r\n            name=\"userStatus\"\r\n            class=\"custom-control-input\"\r\n            (change)=\"updateUserStatus()\"\r\n            value=\"busy\"\r\n          />\r\n          <label class=\"custom-control-label ml-25\" for=\"dndStatusRadio\">Do Not Disturb</label>\r\n        </div>\r\n      </li>\r\n      <li class=\"pb-1\">\r\n        <div class=\"custom-control custom-control-warning custom-radio\">\r\n          <input\r\n            type=\"radio\"\r\n            id=\"awayStatusRadio\"\r\n            [(ngModel)]=\"userProfile.status\"\r\n            name=\"userStatus\"\r\n            class=\"custom-control-input\"\r\n            (change)=\"updateUserStatus()\"\r\n            value=\"away\"\r\n          />\r\n          <label class=\"custom-control-label ml-25\" for=\"awayStatusRadio\">Away</label>\r\n        </div>\r\n      </li>\r\n      <li class=\"pb-1\">\r\n        <div class=\"custom-control custom-control-secondary custom-radio\">\r\n          <input\r\n            type=\"radio\"\r\n            id=\"offlineStatusRadio\"\r\n            [(ngModel)]=\"userProfile.status\"\r\n            name=\"userStatus\"\r\n            class=\"custom-control-input\"\r\n            (change)=\"updateUserStatus()\"\r\n            value=\"offline\"\r\n          />\r\n          <label class=\"custom-control-label ml-25\" for=\"offlineStatusRadio\">Offline</label>\r\n        </div>\r\n      </li>\r\n    </ul>\r\n    <!--/ To set user status -->\r\n\r\n    <!-- User settings -->\r\n    <h6 class=\"section-label mb-1 mt-2\">Settings</h6>\r\n    <ul class=\"list-unstyled\">\r\n      <li class=\"d-flex justify-content-between align-items-center mb-1\">\r\n        <div class=\"d-flex align-items-center\">\r\n          <i data-feather=\"check-square\" class=\"mr-75 font-medium-3\"></i>\r\n          <span class=\"align-middle\">Two-step Verification</span>\r\n        </div>\r\n        <div class=\"custom-control custom-switch mr-0\">\r\n          <input\r\n            type=\"checkbox\"\r\n            class=\"custom-control-input\"\r\n            id=\"customSwitch1\"\r\n            [checked]=\"userProfile.settings.isTwoStepAuthVerificationEnabled\"\r\n          />\r\n          <label class=\"custom-control-label\" for=\"customSwitch1\"></label>\r\n        </div>\r\n      </li>\r\n      <li class=\"d-flex justify-content-between align-items-center mb-1\">\r\n        <div class=\"d-flex align-items-center\">\r\n          <i data-feather=\"bell\" class=\"mr-75 font-medium-3\"></i>\r\n          <span class=\"align-middle\">Notification</span>\r\n        </div>\r\n        <div class=\"custom-control custom-switch mr-0\">\r\n          <input\r\n            type=\"checkbox\"\r\n            class=\"custom-control-input\"\r\n            id=\"customSwitch2\"\r\n            [checked]=\"userProfile.settings.isNotificationsOn\"\r\n          />\r\n          <label class=\"custom-control-label\" for=\"customSwitch2\"></label>\r\n        </div>\r\n      </li>\r\n      <li class=\"mb-1 d-flex align-items-center cursor-pointer\">\r\n        <i data-feather=\"user\" class=\"mr-75 font-medium-3\"></i>\r\n        <span class=\"align-middle\">Invite Friends</span>\r\n      </li>\r\n      <li class=\"d-flex align-items-center cursor-pointer\">\r\n        <i data-feather=\"trash\" class=\"mr-75 font-medium-3\"></i>\r\n        <span class=\"align-middle\">Delete Account</span>\r\n      </li>\r\n    </ul>\r\n    <!--/ User settings -->\r\n\r\n    <!-- Logout Button -->\r\n    <div class=\"mt-3\">\r\n      <button class=\"btn btn-primary\" rippleEffect>\r\n        <span>Logout</span>\r\n      </button>\r\n    </div>\r\n    <!--/ Logout Button -->\r\n  </div>\r\n  <!-- User Details end -->\r\n</div>\r\n<!--/ Admin user profile area -->\r\n","import { Component, ViewEncapsulation } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-chat',\r\n  templateUrl: './chat.component.html',\r\n  styleUrls: ['./chat.component.scss'],\r\n  encapsulation: ViewEncapsulation.None,\r\n  host: { class: 'chat-application' }\r\n})\r\nexport class ChatComponent {}\r\n","<div class=\"content-area-wrapper container-xxl p-0\">\r\n  <!-- sidebar Left -->\r\n\r\n  <!-- chat-sidebar -->\r\n  <div class=\"sidebar-left\">\r\n    <div class=\"sidebar\">\r\n      <core-sidebar\r\n        class=\"sidebar-content\"\r\n        name=\"chat-sidebar\"\r\n        overlayClass=\"body-content-overlay\"\r\n        collapsibleSidebar=\"bs-gt-lg\"\r\n      >\r\n        <app-chat-sidebar class=\"chat-sidebar-wrapper\"></app-chat-sidebar>\r\n      </core-sidebar>\r\n\r\n      <!--/ chat-sidebar -->\r\n\r\n      <!-- chat-user-sidebar -->\r\n\r\n      <core-sidebar\r\n        class=\"chat-profile-sidebar\"\r\n        name=\"chat-user-sidebar\"\r\n        overlayClass=\"body-content-overlay\"\r\n        hideOnEsc=\"true\"\r\n      >\r\n        <app-chat-user-sidebar></app-chat-user-sidebar>\r\n      </core-sidebar>\r\n    </div>\r\n  </div>\r\n  <!--/ chat-user-sidebar -->\r\n\r\n  <!--/ sidebar Left -->\r\n\r\n  <!-- content-right -->\r\n  <div class=\"content-right\">\r\n    <!-- chat-active-sidebar -->\r\n    <core-sidebar\r\n      class=\"user-profile-sidebar\"\r\n      name=\"chat-active-sidebar\"\r\n      overlayClass=\"body-content-overlay\"\r\n      hideOnEsc=\"true\"\r\n    >\r\n      <app-chat-active-sidebar></app-chat-active-sidebar>\r\n    </core-sidebar>\r\n    <!--/ chat-active-sidebar -->\r\n    <div class=\"content-wrapper container-xxl p-0\">\r\n      <div class=\"content-body\">\r\n        <app-chat-content></app-chat-content>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <!--/ content-right -->\r\n</div>\r\n","import { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\n\r\nimport { NgbModule } from '@ng-bootstrap/ng-bootstrap';\r\nimport { PerfectScrollbarModule } from 'ngx-perfect-scrollbar';\r\n\r\nimport { CoreSidebarModule } from '@core/components';\r\nimport { CoreCommonModule } from '@core/common.module';\r\n\r\nimport { ChatContentComponent } from 'app/main/apps/chat/chat-content/chat-content.component';\r\nimport { ChatSidebarComponent } from 'app/main/apps/chat/chat-sidebars/chat-sidebar/chat-sidebar.component';\r\nimport { ChatUserSidebarComponent } from 'app/main/apps/chat/chat-sidebars/chat-user-sidebar/chat-user-sidebar.component';\r\nimport { ChatActiveSidebarComponent } from 'app/main/apps/chat/chat-sidebars/chat-active-sidebar/chat-active-sidebar.component';\r\nimport { ChatComponent } from 'app/main/apps/chat/chat.component';\r\nimport { ChatService } from 'app/main/apps/chat/chat.service';\r\n\r\n// routing\r\nconst routes: Routes = [\r\n  {\r\n    path: '**',\r\n    component: ChatComponent,\r\n    resolve: {\r\n      chatData: ChatService\r\n    },\r\n    data: { animation: 'chat' }\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  declarations: [\r\n    ChatComponent,\r\n    ChatContentComponent,\r\n    ChatSidebarComponent,\r\n    ChatUserSidebarComponent,\r\n    ChatActiveSidebarComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    CoreSidebarModule,\r\n    RouterModule.forChild(routes),\r\n    CoreCommonModule,\r\n    PerfectScrollbarModule,\r\n    NgbModule\r\n  ],\r\n  providers: [ChatService]\r\n})\r\nexport class ChatModule {}\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { ActivatedRouteSnapshot, RouterStateSnapshot } from '@angular/router';\r\n\r\nimport { BehaviorSubject, Observable } from 'rxjs';\r\n\r\n@Injectable()\r\nexport class ChatService {\r\n  public contacts: any[];\r\n  public chats: any[];\r\n  public userProfile;\r\n  public isChatOpen: Boolean;\r\n  public chatUsers: any[];\r\n  public selectedChat;\r\n  public selectedChatUser;\r\n\r\n  public onContactsChange: BehaviorSubject<any>;\r\n  public onChatsChange: BehaviorSubject<any>;\r\n  public onSelectedChatChange: BehaviorSubject<any>;\r\n  public onSelectedChatUserChange: BehaviorSubject<any>;\r\n  public onChatUsersChange: BehaviorSubject<any>;\r\n  public onChatOpenChange: BehaviorSubject<Boolean>;\r\n  public onUserProfileChange: BehaviorSubject<any>;\r\n\r\n  constructor(private _httpClient: HttpClient) {\r\n    this.isChatOpen = false;\r\n    this.onContactsChange = new BehaviorSubject([]);\r\n    this.onChatsChange = new BehaviorSubject([]);\r\n    this.onSelectedChatChange = new BehaviorSubject([]);\r\n    this.onSelectedChatUserChange = new BehaviorSubject([]);\r\n    this.onChatUsersChange = new BehaviorSubject([]);\r\n    this.onChatOpenChange = new BehaviorSubject(false);\r\n    this.onUserProfileChange = new BehaviorSubject([]);\r\n  }\r\n\r\n  /**\r\n   * Resolver\r\n   *\r\n   * @param {ActivatedRouteSnapshot} route\r\n   * @param {RouterStateSnapshot} state\r\n   * @returns {Observable<any> | Promise<any> | any}\r\n   */\r\n  resolve(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable<any> | Promise<any> | any {\r\n    return new Promise<void>((resolve, reject) => {\r\n      Promise.all([\r\n        this.getContacts(),\r\n        this.getChats(),\r\n        this.getUserProfile(),\r\n        this.getActiveChats(),\r\n        this.getChatUsers()\r\n      ]).then(() => {\r\n        resolve();\r\n      }, reject);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Get Contacts\r\n   */\r\n  getContacts(): Promise<any[]> {\r\n    const url = `api/chat-contacts`;\r\n\r\n    return new Promise((resolve, reject) => {\r\n      this._httpClient.get(url).subscribe((response: any) => {\r\n        this.contacts = response;\r\n        this.onContactsChange.next(this.contacts);\r\n        resolve(this.contacts);\r\n      }, reject);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Get Chats\r\n   */\r\n  getChats(): Promise<any[]> {\r\n    const url = `api/chat-chats`;\r\n\r\n    return new Promise((resolve, reject) => {\r\n      this._httpClient.get(url).subscribe((response: any) => {\r\n        this.chats = response;\r\n        this.onChatsChange.next(this.chats);\r\n\r\n        resolve(this.chats);\r\n      }, reject);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Get User Profile\r\n   */\r\n  getUserProfile(): Promise<any[]> {\r\n    const url = `api/chat-profileUser`;\r\n\r\n    return new Promise((resolve, reject) => {\r\n      this._httpClient.get(url).subscribe((response: any) => {\r\n        this.userProfile = response;\r\n        this.onUserProfileChange.next(this.userProfile);\r\n        resolve(this.userProfile);\r\n      }, reject);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Get Selected Chat User\r\n   *\r\n   * @param userId\r\n   */\r\n  getSelectedChatUser(userId) {\r\n    const selectUser = this.contacts.find(contact => contact.id === userId);\r\n    this.selectedChatUser = selectUser;\r\n\r\n    this.onSelectedChatUserChange.next(this.selectedChatUser);\r\n  }\r\n\r\n  /**\r\n   * Get Active Chats\r\n   */\r\n  getActiveChats() {\r\n    const chatArr = this.chats.filter(chat => {\r\n      return this.contacts.some(contact => {\r\n        return contact.id === chat.userId;\r\n      });\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Get Chat Users\r\n   */\r\n  getChatUsers() {\r\n    const contactArr = this.contacts.filter(contact => {\r\n      return this.chats.some(chat => {\r\n        return chat.userId === contact.id;\r\n      });\r\n    });\r\n    this.chatUsers = contactArr;\r\n    this.onChatUsersChange.next(this.chatUsers);\r\n  }\r\n\r\n  /**\r\n   * Selected Chats\r\n   *\r\n   * @param id\r\n   */\r\n  selectedChats(id) {\r\n    const selectChat = this.chats.find(chat => chat.userId === id);\r\n\r\n    // If Chat is Avaiable of Selected Id\r\n    if (selectChat !== undefined) {\r\n      this.selectedChat = selectChat;\r\n\r\n      this.onSelectedChatChange.next(this.selectedChat);\r\n      this.getSelectedChatUser(id);\r\n    }\r\n    // Else Create New Chat\r\n    else {\r\n      const newChat = {\r\n        userId: id,\r\n        unseenMsgs: 0\r\n      };\r\n      this.onSelectedChatChange.next(newChat);\r\n      this.getSelectedChatUser(id);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Create New Chat\r\n   *\r\n   * @param id\r\n   * @param chat\r\n   */\r\n  createNewChat(id, chat) {\r\n    const newChat = {\r\n      userId: id,\r\n      unseenMsgs: 0,\r\n      chat: [chat]\r\n    };\r\n\r\n    if (chat.message !== '') {\r\n      return new Promise<void>((resolve, reject) => {\r\n        this._httpClient.post('api/chat-chats/', { ...newChat }).subscribe(() => {\r\n          this.getChats();\r\n          this.getChatUsers();\r\n          this.getSelectedChatUser(id);\r\n          this.openChat(id);\r\n          resolve();\r\n        }, reject);\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Open Chat\r\n   *\r\n   * @param id\r\n   */\r\n  openChat(id) {\r\n    this.isChatOpen = true;\r\n    this.onChatOpenChange.next(this.isChatOpen);\r\n    this.selectedChats(id);\r\n  }\r\n\r\n  /**\r\n   * Update Chat\r\n   *\r\n   * @param chats\r\n   */\r\n  updateChat(chats) {\r\n    return new Promise<void>((resolve, reject) => {\r\n      this._httpClient.post('api/chat-chats/' + chats.id, { ...chats }).subscribe(() => {\r\n        this.getChats();\r\n        resolve();\r\n      }, reject);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Update User Profile\r\n   *\r\n   * @param userProfileRef\r\n   */\r\n  updateUserProfile(userProfileRef) {\r\n    this.userProfile = userProfileRef;\r\n    this.onUserProfileChange.next(this.userProfile);\r\n  }\r\n}\r\n"],"names":[],"sourceRoot":"webpack:///","x_google_ignoreList":[]}